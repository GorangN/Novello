{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":39,"index":159}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":230},"end":{"line":5,"column":26,"index":256}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Get backend URL from environment or use appropriate default\n  const getBaseURL = () => {\n    // For native apps (iOS/Android)\n    if (Platform.default.OS !== 'web') {\n      // Get the host from expo config (this will be the tunnel host)\n      const manifest = Constants.default.expoConfig;\n      if (manifest?.hostUri) {\n        // hostUri is like \"bookfolio.localto.net:443\" or \"exp.host:80\"\n        const parts = manifest.hostUri.split(':');\n        const host = parts[0];\n        const port = parts[1];\n\n        // For Expo Go, use the same host but default http protocol\n        // The tunnel will handle routing to the backend\n        if (host && host.includes('localto.net')) {\n          // Use HTTP on the same host - the tunnel handles HTTPS\n          return `http://${host}`;\n        }\n\n        // Fallback for other tunnel services\n        return `http://${host}:${port || '80'}`;\n      }\n\n      // Last resort fallback - shouldn't reach here\n      return 'http://localhost:8001';\n    }\n\n    // For web\n    if (false) {\n      return window.location.origin;\n    }\n    return '';\n  };\n  const API_URL = getBaseURL();\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          withCredentials: true\n        });\n        setUser(response.data);\n      } catch (error) {\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      }, {\n        withCredentials: true\n      });\n      setUser(response.data);\n    };\n    const register = async (email, password, name) => {\n      try {\n        console.log('AuthContext: Attempting registration to:', `${API_URL}/api/auth/register`);\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          email,\n          password,\n          name\n        }, {\n          withCredentials: true\n        });\n        console.log('AuthContext: Registration response:', response.data);\n        setUser(response.data);\n      } catch (error) {\n        console.error('AuthContext: Registration error:', error);\n        console.error('AuthContext: Error details:', error.response?.data);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      await axios.default.post(`${API_URL}/api/auth/logout`, {}, {\n        withCredentials: true\n      });\n      setUser(null);\n    };\n    const loginWithGoogle = () => {\n      if (Platform.default.OS === 'web') {\n        // For now, show message that Google login will be enabled soon\n        alert('Google login is coming soon! Please use email/password registration for now.');\n      } else {\n        // On mobile, we can implement later\n        alert('Google login is coming soon! Please use email/password registration for now.');\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        loginWithGoogle\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":154,"map":[[13,2,62,0,"Object"],[13,8,62,0],[13,9,62,0,"defineProperty"],[13,23,62,0],[13,24,62,0,"exports"],[13,31,62,0],[14,4,62,0,"enumerable"],[14,14,62,0],[15,4,62,0,"get"],[15,7,62,0],[15,18,62,0,"get"],[15,19,62,0],[16,6,62,0],[16,13,62,0,"AuthProvider"],[16,25,62,0],[17,4,62,0],[18,2,62,0],[19,2,131,0,"Object"],[19,8,131,0],[19,9,131,0,"defineProperty"],[19,23,131,0],[19,24,131,0,"exports"],[19,31,131,0],[20,4,131,0,"enumerable"],[20,14,131,0],[21,4,131,0,"get"],[21,7,131,0],[21,18,131,0,"get"],[21,19,131,0],[22,6,131,0],[22,13,131,0,"useAuth"],[22,20,131,0],[23,4,131,0],[24,2,131,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,1,78],[26,6,1,78,"_reactNativeWebDistExportsPlatform"],[26,40,1,78],[26,43,1,78,"require"],[26,50,1,78],[26,51,1,78,"_dependencyMap"],[26,65,1,78],[27,2,1,78],[27,6,1,78,"Platform"],[27,14,1,78],[27,17,1,78,"_interopDefault"],[27,32,1,78],[27,33,1,78,"_reactNativeWebDistExportsPlatform"],[27,67,1,78],[28,2,3,0],[28,6,3,0,"_expoConstants"],[28,20,3,0],[28,23,3,0,"require"],[28,30,3,0],[28,31,3,0,"_dependencyMap"],[28,45,3,0],[29,2,3,0],[29,6,3,0,"Constants"],[29,15,3,0],[29,18,3,0,"_interopDefault"],[29,33,3,0],[29,34,3,0,"_expoConstants"],[29,48,3,0],[30,2,5,0],[30,6,5,0,"_axios"],[30,12,5,0],[30,15,5,0,"require"],[30,22,5,0],[30,23,5,0,"_dependencyMap"],[30,37,5,0],[31,2,5,0],[31,6,5,0,"axios"],[31,11,5,0],[31,14,5,0,"_interopDefault"],[31,29,5,0],[31,30,5,0,"_axios"],[31,36,5,0],[32,2,5,26],[32,6,5,26,"_reactJsxDevRuntime"],[32,25,5,26],[32,28,5,26,"require"],[32,35,5,26],[32,36,5,26,"_dependencyMap"],[32,50,5,26],[33,2,23,0],[33,8,23,6,"AuthContext"],[33,19,23,17],[33,35,23,20],[33,39,23,20,"createContext"],[33,45,23,33],[33,46,23,33,"createContext"],[33,59,23,33],[33,61,23,63,"undefined"],[33,70,23,72],[33,71,23,73],[35,2,25,0],[36,2,26,0],[36,8,26,6,"getBaseURL"],[36,18,26,16],[36,21,26,19,"getBaseURL"],[36,22,26,19],[36,27,26,25],[37,4,27,2],[38,4,28,2],[38,8,28,6,"Platform"],[38,16,28,14],[38,17,28,14,"default"],[38,24,28,14],[38,25,28,15,"OS"],[38,27,28,17],[38,32,28,22],[38,37,28,27],[38,39,28,29],[39,6,29,4],[40,6,30,4],[40,12,30,10,"manifest"],[40,20,30,18],[40,23,30,21,"Constants"],[40,32,30,30],[40,33,30,30,"default"],[40,40,30,30],[40,41,30,31,"expoConfig"],[40,51,30,41],[41,6,31,4],[41,10,31,8,"manifest"],[41,18,31,16],[41,20,31,18,"hostUri"],[41,27,31,25],[41,29,31,27],[42,8,32,6],[43,8,33,6],[43,14,33,12,"parts"],[43,19,33,17],[43,22,33,20,"manifest"],[43,30,33,28],[43,31,33,29,"hostUri"],[43,38,33,36],[43,39,33,37,"split"],[43,44,33,42],[43,45,33,43],[43,48,33,46],[43,49,33,47],[44,8,34,6],[44,14,34,12,"host"],[44,18,34,16],[44,21,34,19,"parts"],[44,26,34,24],[44,27,34,25],[44,28,34,26],[44,29,34,27],[45,8,35,6],[45,14,35,12,"port"],[45,18,35,16],[45,21,35,19,"parts"],[45,26,35,24],[45,27,35,25],[45,28,35,26],[45,29,35,27],[47,8,37,6],[48,8,38,6],[49,8,39,6],[49,12,39,10,"host"],[49,16,39,14],[49,20,39,18,"host"],[49,24,39,22],[49,25,39,23,"includes"],[49,33,39,31],[49,34,39,32],[49,47,39,45],[49,48,39,46],[49,50,39,48],[50,10,40,8],[51,10,41,8],[51,17,41,15],[51,27,41,25,"host"],[51,31,41,29],[51,33,41,31],[52,8,42,6],[54,8,44,6],[55,8,45,6],[55,15,45,13],[55,25,45,23,"host"],[55,29,45,27],[55,33,45,31,"port"],[55,37,45,35],[55,41,45,39],[55,45,45,43],[55,47,45,45],[56,6,46,4],[58,6,48,4],[59,6,49,4],[59,13,49,11],[59,36,49,34],[60,4,50,2],[62,4,52,2],[63,4,53,2],[63,15,53,37],[64,6,54,4],[64,13,54,11,"window"],[64,19,54,17],[64,20,54,18,"location"],[64,28,54,26],[64,29,54,27,"origin"],[64,35,54,33],[65,4,55,2],[66,4,57,2],[66,11,57,9],[66,13,57,11],[67,2,58,0],[67,3,58,1],[68,2,60,0],[68,8,60,6,"API_URL"],[68,15,60,13],[68,18,60,16,"getBaseURL"],[68,28,60,26],[68,29,60,27],[68,30,60,28],[69,2,62,7],[69,8,62,13,"AuthProvider"],[69,20,62,66],[69,23,62,69,"AuthProvider"],[69,24,62,70],[70,4,62,72,"children"],[71,2,62,81],[71,3,62,82],[71,8,62,87],[72,4,63,2],[72,10,63,8],[72,11,63,9,"user"],[72,15,63,13],[72,17,63,15,"setUser"],[72,24,63,22],[72,25,63,23],[72,28,63,26],[72,32,63,26,"useState"],[72,38,63,34],[72,39,63,34,"useState"],[72,47,63,34],[72,49,63,48],[72,53,63,52],[72,54,63,53],[73,4,64,2],[73,10,64,8],[73,11,64,9,"loading"],[73,18,64,16],[73,20,64,18,"setLoading"],[73,30,64,28],[73,31,64,29],[73,34,64,32],[73,38,64,32,"useState"],[73,44,64,40],[73,45,64,40,"useState"],[73,53,64,40],[73,55,64,41],[73,59,64,45],[73,60,64,46],[74,4,66,2],[74,8,66,2,"useEffect"],[74,14,66,11],[74,15,66,11,"useEffect"],[74,24,66,11],[74,26,66,12],[74,32,66,18],[75,6,67,4,"checkAuth"],[75,15,67,13],[75,16,67,14],[75,17,67,15],[76,4,68,2],[76,5,68,3],[76,7,68,5],[76,9,68,7],[76,10,68,8],[77,4,70,2],[77,10,70,8,"checkAuth"],[77,19,70,17],[77,22,70,20],[77,28,70,20,"checkAuth"],[77,29,70,20],[77,34,70,32],[78,6,71,4],[78,10,71,8],[79,8,72,6],[79,14,72,12,"response"],[79,22,72,20],[79,25,72,23],[79,31,72,29,"axios"],[79,36,72,34],[79,37,72,34,"default"],[79,44,72,34],[79,45,72,35,"get"],[79,48,72,38],[79,49,72,39],[79,52,72,42,"API_URL"],[79,59,72,49],[79,73,72,63],[79,75,72,65],[80,10,73,8,"withCredentials"],[80,25,73,23],[80,27,73,25],[81,8,74,6],[81,9,74,7],[81,10,74,8],[82,8,75,6,"setUser"],[82,15,75,13],[82,16,75,14,"response"],[82,24,75,22],[82,25,75,23,"data"],[82,29,75,27],[82,30,75,28],[83,6,76,4],[83,7,76,5],[83,8,76,6],[83,15,76,13,"error"],[83,20,76,18],[83,22,76,20],[84,8,77,6,"setUser"],[84,15,77,13],[84,16,77,14],[84,20,77,18],[84,21,77,19],[85,6,78,4],[85,7,78,5],[85,16,78,14],[86,8,79,6,"setLoading"],[86,18,79,16],[86,19,79,17],[86,24,79,22],[86,25,79,23],[87,6,80,4],[88,4,81,2],[88,5,81,3],[89,4,83,2],[89,10,83,8,"login"],[89,15,83,13],[89,18,83,16],[89,24,83,16,"login"],[89,25,83,23,"email"],[89,30,83,36],[89,32,83,38,"password"],[89,40,83,54],[89,45,83,59],[90,6,84,4],[90,12,84,10,"response"],[90,20,84,18],[90,23,84,21],[90,29,84,27,"axios"],[90,34,84,32],[90,35,84,32,"default"],[90,42,84,32],[90,43,84,33,"post"],[90,47,84,37],[90,48,85,6],[90,51,85,9,"API_URL"],[90,58,85,16],[90,75,85,33],[90,77,86,6],[91,8,86,8,"email"],[91,13,86,13],[92,8,86,15,"password"],[93,6,86,24],[93,7,86,25],[93,9,87,6],[94,8,87,8,"withCredentials"],[94,23,87,23],[94,25,87,25],[95,6,87,30],[95,7,88,4],[95,8,88,5],[96,6,89,4,"setUser"],[96,13,89,11],[96,14,89,12,"response"],[96,22,89,20],[96,23,89,21,"data"],[96,27,89,25],[96,28,89,26],[97,4,90,2],[97,5,90,3],[98,4,92,2],[98,10,92,8,"register"],[98,18,92,16],[98,21,92,19],[98,27,92,19,"register"],[98,28,92,26,"email"],[98,33,92,39],[98,35,92,41,"password"],[98,43,92,57],[98,45,92,59,"name"],[98,49,92,71],[98,54,92,76],[99,6,93,4],[99,10,93,8],[100,8,94,6,"console"],[100,15,94,13],[100,16,94,14,"log"],[100,19,94,17],[100,20,94,18],[100,62,94,60],[100,64,94,62],[100,67,94,65,"API_URL"],[100,74,94,72],[100,94,94,92],[100,95,94,93],[101,8,95,6],[101,14,95,12,"response"],[101,22,95,20],[101,25,95,23],[101,31,95,29,"axios"],[101,36,95,34],[101,37,95,34,"default"],[101,44,95,34],[101,45,95,35,"post"],[101,49,95,39],[101,50,96,8],[101,53,96,11,"API_URL"],[101,60,96,18],[101,80,96,38],[101,82,97,8],[102,10,97,10,"email"],[102,15,97,15],[103,10,97,17,"password"],[103,18,97,25],[104,10,97,27,"name"],[105,8,97,32],[105,9,97,33],[105,11,98,8],[106,10,98,10,"withCredentials"],[106,25,98,25],[106,27,98,27],[107,8,98,32],[107,9,99,6],[107,10,99,7],[108,8,100,6,"console"],[108,15,100,13],[108,16,100,14,"log"],[108,19,100,17],[108,20,100,18],[108,57,100,55],[108,59,100,57,"response"],[108,67,100,65],[108,68,100,66,"data"],[108,72,100,70],[108,73,100,71],[109,8,101,6,"setUser"],[109,15,101,13],[109,16,101,14,"response"],[109,24,101,22],[109,25,101,23,"data"],[109,29,101,27],[109,30,101,28],[110,6,102,4],[110,7,102,5],[110,8,102,6],[110,15,102,13,"error"],[110,20,102,23],[110,22,102,25],[111,8,103,6,"console"],[111,15,103,13],[111,16,103,14,"error"],[111,21,103,19],[111,22,103,20],[111,56,103,54],[111,58,103,56,"error"],[111,63,103,61],[111,64,103,62],[112,8,104,6,"console"],[112,15,104,13],[112,16,104,14,"error"],[112,21,104,19],[112,22,104,20],[112,51,104,49],[112,53,104,51,"error"],[112,58,104,56],[112,59,104,57,"response"],[112,67,104,65],[112,69,104,67,"data"],[112,73,104,71],[112,74,104,72],[113,8,105,6],[113,14,105,12,"error"],[113,19,105,17],[114,6,106,4],[115,4,107,2],[115,5,107,3],[116,4,109,2],[116,10,109,8,"logout"],[116,16,109,14],[116,19,109,17],[116,25,109,17,"logout"],[116,26,109,17],[116,31,109,29],[117,6,110,4],[117,12,110,10,"axios"],[117,17,110,15],[117,18,110,15,"default"],[117,25,110,15],[117,26,110,16,"post"],[117,30,110,20],[117,31,110,21],[117,34,110,24,"API_URL"],[117,41,110,31],[117,59,110,49],[117,61,110,51],[117,62,110,52],[117,63,110,53],[117,65,110,55],[118,8,110,57,"withCredentials"],[118,23,110,72],[118,25,110,74],[119,6,110,79],[119,7,110,80],[119,8,110,81],[120,6,111,4,"setUser"],[120,13,111,11],[120,14,111,12],[120,18,111,16],[120,19,111,17],[121,4,112,2],[121,5,112,3],[122,4,114,2],[122,10,114,8,"loginWithGoogle"],[122,25,114,23],[122,28,114,26,"loginWithGoogle"],[122,29,114,26],[122,34,114,32],[123,6,115,4],[123,10,115,8,"Platform"],[123,18,115,16],[123,19,115,16,"default"],[123,26,115,16],[123,27,115,17,"OS"],[123,29,115,19],[123,34,115,24],[123,39,115,29],[123,41,115,31],[124,8,116,6],[125,8,117,6,"alert"],[125,13,117,11],[125,14,117,12],[125,92,117,90],[125,93,117,91],[126,6,118,4],[126,7,118,5],[126,13,118,11],[127,8,119,6],[128,8,120,6,"alert"],[128,13,120,11],[128,14,120,12],[128,92,120,90],[128,93,120,91],[129,6,121,4],[130,4,122,2],[130,5,122,3],[131,4,124,2],[131,24,125,4],[131,28,125,4,"_reactJsxDevRuntime"],[131,47,125,4],[131,48,125,4,"jsxDEV"],[131,54,125,4],[131,56,125,5,"AuthContext"],[131,67,125,16],[131,68,125,17,"Provider"],[131,76,125,25],[132,6,125,26,"value"],[132,11,125,31],[132,13,125,33],[133,8,125,35,"user"],[133,12,125,39],[134,8,125,41,"loading"],[134,15,125,48],[135,8,125,50,"login"],[135,13,125,55],[136,8,125,57,"register"],[136,16,125,65],[137,8,125,67,"logout"],[137,14,125,73],[138,8,125,75,"loginWithGoogle"],[139,6,125,91],[139,7,125,93],[140,6,125,93,"children"],[140,14,125,93],[140,16,126,7,"children"],[141,4,126,15],[142,6,126,15,"fileName"],[142,14,126,15],[142,16,126,15,"_jsxFileName"],[142,28,126,15],[143,6,126,15,"lineNumber"],[143,16,126,15],[144,6,126,15,"columnNumber"],[144,18,126,15],[145,4,126,15],[145,11,127,26],[145,12,127,27],[146,2,129,0],[146,3,129,1],[147,2,131,7],[147,8,131,13,"useAuth"],[147,15,131,20],[147,18,131,23,"useAuth"],[147,19,131,23],[147,24,131,29],[148,4,132,2],[148,10,132,8,"context"],[148,17,132,15],[148,20,132,18],[148,24,132,18,"useContext"],[148,30,132,28],[148,31,132,28,"useContext"],[148,41,132,28],[148,43,132,29,"AuthContext"],[148,54,132,40],[148,55,132,41],[149,4,133,2],[149,8,133,6],[149,9,133,7,"context"],[149,16,133,14],[149,18,133,16],[150,6,134,4],[150,12,134,10],[150,16,134,14,"Error"],[150,21,134,19],[150,22,134,20],[150,64,134,62],[150,65,134,63],[151,4,135,2],[152,4,136,2],[152,11,136,9,"context"],[152,18,136,16],[153,2,137,0],[153,3,137,1],[154,0,137,2],[154,3]],"functionMap":{"names":["<global>","getBaseURL","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","loginWithGoogle","useAuth"],"mappings":"AAA;mBCyB;CDgC;qEEI;YCI;GDE;oBEE;GFW;gBGE;GHO;mBIE;GJe;iBKE;GLG;0BME;GNQ;CFO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}