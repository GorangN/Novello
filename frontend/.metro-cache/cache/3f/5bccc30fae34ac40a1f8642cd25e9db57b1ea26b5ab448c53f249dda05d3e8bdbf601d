{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":39,"index":159}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":230},"end":{"line":5,"column":26,"index":256}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Get backend URL from environment or use appropriate default\n  const getBaseURL = () => {\n    // For native apps (iOS/Android)\n    if (Platform.default.OS !== 'web') {\n      // Get the host from expo config (this will be the tunnel host)\n      const manifest = Constants.default.expoConfig;\n      if (manifest?.hostUri) {\n        // hostUri is like \"bookfolio.localto.net:443\" or \"exp.host:80\"\n        const parts = manifest.hostUri.split(':');\n        const host = parts[0];\n        const port = parts[1];\n\n        // For Expo Go, use the same host but default http protocol\n        // The tunnel will handle routing to the backend\n        if (host && host.includes('localto.net')) {\n          // Use HTTP on the same host - the tunnel handles HTTPS\n          return `http://${host}`;\n        }\n\n        // Fallback for other tunnel services\n        return `http://${host}:${port || '80'}`;\n      }\n\n      // Last resort fallback - shouldn't reach here\n      return 'http://localhost:8001';\n    }\n\n    // For web\n    if (typeof window !== 'undefined') {\n      return window.location.origin;\n    }\n    return '';\n  };\n  const API_URL = getBaseURL();\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          withCredentials: true\n        });\n        setUser(response.data);\n      } catch (error) {\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      }, {\n        withCredentials: true\n      });\n      setUser(response.data);\n    };\n    const register = async (email, password, name) => {\n      try {\n        console.log('AuthContext: Attempting registration to:', `${API_URL}/api/auth/register`);\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          email,\n          password,\n          name\n        }, {\n          withCredentials: true\n        });\n        console.log('AuthContext: Registration response:', response.data);\n        setUser(response.data);\n      } catch (error) {\n        console.error('AuthContext: Registration error:', error);\n        console.error('AuthContext: Error details:', error.response?.data);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      await axios.default.post(`${API_URL}/api/auth/logout`, {}, {\n        withCredentials: true\n      });\n      setUser(null);\n    };\n    const loginWithGoogle = () => {\n      if (Platform.default.OS === 'web') {\n        // For now, show message that Google login will be enabled soon\n        alert('Google login is coming soon! Please use email/password registration for now.');\n      } else {\n        // On mobile, we can implement later\n        alert('Google login is coming soon! Please use email/password registration for now.');\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        loginWithGoogle\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":163,"map":[[15,2,62,0,"Object"],[15,8,62,0],[15,9,62,0,"defineProperty"],[15,23,62,0],[15,24,62,0,"exports"],[15,31,62,0],[16,4,62,0,"enumerable"],[16,14,62,0],[17,4,62,0,"get"],[17,7,62,0],[17,18,62,0,"get"],[17,19,62,0],[18,6,62,0],[18,13,62,0,"AuthProvider"],[18,25,62,0],[19,4,62,0],[20,2,62,0],[21,2,131,0,"Object"],[21,8,131,0],[21,9,131,0,"defineProperty"],[21,23,131,0],[21,24,131,0,"exports"],[21,31,131,0],[22,4,131,0,"enumerable"],[22,14,131,0],[23,4,131,0,"get"],[23,7,131,0],[23,18,131,0,"get"],[23,19,131,0],[24,6,131,0],[24,13,131,0,"useAuth"],[24,20,131,0],[25,4,131,0],[26,2,131,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,1,78],[28,6,1,78,"_reactNativeWebDistExportsPlatform"],[28,40,1,78],[28,43,1,78,"require"],[28,50,1,78],[28,51,1,78,"_dependencyMap"],[28,65,1,78],[29,2,1,78],[29,6,1,78,"Platform"],[29,14,1,78],[29,17,1,78,"_interopDefault"],[29,32,1,78],[29,33,1,78,"_reactNativeWebDistExportsPlatform"],[29,67,1,78],[30,2,3,0],[30,6,3,0,"_expoConstants"],[30,20,3,0],[30,23,3,0,"require"],[30,30,3,0],[30,31,3,0,"_dependencyMap"],[30,45,3,0],[31,2,3,0],[31,6,3,0,"Constants"],[31,15,3,0],[31,18,3,0,"_interopDefault"],[31,33,3,0],[31,34,3,0,"_expoConstants"],[31,48,3,0],[32,2,5,0],[32,6,5,0,"_axios"],[32,12,5,0],[32,15,5,0,"require"],[32,22,5,0],[32,23,5,0,"_dependencyMap"],[32,37,5,0],[33,2,5,0],[33,6,5,0,"axios"],[33,11,5,0],[33,14,5,0,"_interopDefault"],[33,29,5,0],[33,30,5,0,"_axios"],[33,36,5,0],[34,2,5,26],[34,6,5,26,"_reactJsxDevRuntime"],[34,25,5,26],[34,28,5,26,"require"],[34,35,5,26],[34,36,5,26,"_dependencyMap"],[34,50,5,26],[35,2,23,0],[35,8,23,6,"AuthContext"],[35,19,23,17],[35,35,23,20],[35,39,23,20,"createContext"],[35,45,23,33],[35,46,23,33,"createContext"],[35,59,23,33],[35,61,23,63,"undefined"],[35,70,23,72],[35,71,23,73],[37,2,25,0],[38,2,26,0],[38,8,26,6,"getBaseURL"],[38,18,26,16],[38,21,26,19,"getBaseURL"],[38,22,26,19],[38,27,26,25],[39,4,27,2],[40,4,28,2],[40,8,28,6,"Platform"],[40,16,28,14],[40,17,28,14,"default"],[40,24,28,14],[40,25,28,15,"OS"],[40,27,28,17],[40,32,28,22],[40,37,28,27],[40,39,28,29],[41,6,29,4],[42,6,30,4],[42,12,30,10,"manifest"],[42,20,30,18],[42,23,30,21,"Constants"],[42,32,30,30],[42,33,30,30,"default"],[42,40,30,30],[42,41,30,31,"expoConfig"],[42,51,30,41],[43,6,31,4],[43,10,31,8,"manifest"],[43,18,31,16],[43,20,31,18,"hostUri"],[43,27,31,25],[43,29,31,27],[44,8,32,6],[45,8,33,6],[45,14,33,12,"parts"],[45,19,33,17],[45,22,33,20,"manifest"],[45,30,33,28],[45,31,33,29,"hostUri"],[45,38,33,36],[45,39,33,37,"split"],[45,44,33,42],[45,45,33,43],[45,48,33,46],[45,49,33,47],[46,8,34,6],[46,14,34,12,"host"],[46,18,34,16],[46,21,34,19,"parts"],[46,26,34,24],[46,27,34,25],[46,28,34,26],[46,29,34,27],[47,8,35,6],[47,14,35,12,"port"],[47,18,35,16],[47,21,35,19,"parts"],[47,26,35,24],[47,27,35,25],[47,28,35,26],[47,29,35,27],[49,8,37,6],[50,8,38,6],[51,8,39,6],[51,12,39,10,"host"],[51,16,39,14],[51,20,39,18,"host"],[51,24,39,22],[51,25,39,23,"includes"],[51,33,39,31],[51,34,39,32],[51,47,39,45],[51,48,39,46],[51,50,39,48],[52,10,40,8],[53,10,41,8],[53,17,41,15],[53,27,41,25,"host"],[53,31,41,29],[53,33,41,31],[54,8,42,6],[56,8,44,6],[57,8,45,6],[57,15,45,13],[57,25,45,23,"host"],[57,29,45,27],[57,33,45,31,"port"],[57,37,45,35],[57,41,45,39],[57,45,45,43],[57,47,45,45],[58,6,46,4],[60,6,48,4],[61,6,49,4],[61,13,49,11],[61,36,49,34],[62,4,50,2],[64,4,52,2],[65,4,53,2],[65,8,53,6],[65,15,53,13,"window"],[65,21,53,19],[65,26,53,24],[65,37,53,35],[65,39,53,37],[66,6,54,4],[66,13,54,11,"window"],[66,19,54,17],[66,20,54,18,"location"],[66,28,54,26],[66,29,54,27,"origin"],[66,35,54,33],[67,4,55,2],[68,4,57,2],[68,11,57,9],[68,13,57,11],[69,2,58,0],[69,3,58,1],[70,2,60,0],[70,8,60,6,"API_URL"],[70,15,60,13],[70,18,60,16,"getBaseURL"],[70,28,60,26],[70,29,60,27],[70,30,60,28],[71,2,62,7],[71,8,62,13,"AuthProvider"],[71,20,62,66],[71,23,62,69,"AuthProvider"],[71,24,62,70],[72,4,62,72,"children"],[73,2,62,81],[73,3,62,82],[73,8,62,87],[74,4,62,87,"_s"],[74,6,62,87],[75,4,63,2],[75,10,63,8],[75,11,63,9,"user"],[75,15,63,13],[75,17,63,15,"setUser"],[75,24,63,22],[75,25,63,23],[75,28,63,26],[75,32,63,26,"useState"],[75,38,63,34],[75,39,63,34,"useState"],[75,47,63,34],[75,49,63,48],[75,53,63,52],[75,54,63,53],[76,4,64,2],[76,10,64,8],[76,11,64,9,"loading"],[76,18,64,16],[76,20,64,18,"setLoading"],[76,30,64,28],[76,31,64,29],[76,34,64,32],[76,38,64,32,"useState"],[76,44,64,40],[76,45,64,40,"useState"],[76,53,64,40],[76,55,64,41],[76,59,64,45],[76,60,64,46],[77,4,66,2],[77,8,66,2,"useEffect"],[77,14,66,11],[77,15,66,11,"useEffect"],[77,24,66,11],[77,26,66,12],[77,32,66,18],[78,6,67,4,"checkAuth"],[78,15,67,13],[78,16,67,14],[78,17,67,15],[79,4,68,2],[79,5,68,3],[79,7,68,5],[79,9,68,7],[79,10,68,8],[80,4,70,2],[80,10,70,8,"checkAuth"],[80,19,70,17],[80,22,70,20],[80,28,70,20,"checkAuth"],[80,29,70,20],[80,34,70,32],[81,6,71,4],[81,10,71,8],[82,8,72,6],[82,14,72,12,"response"],[82,22,72,20],[82,25,72,23],[82,31,72,29,"axios"],[82,36,72,34],[82,37,72,34,"default"],[82,44,72,34],[82,45,72,35,"get"],[82,48,72,38],[82,49,72,39],[82,52,72,42,"API_URL"],[82,59,72,49],[82,73,72,63],[82,75,72,65],[83,10,73,8,"withCredentials"],[83,25,73,23],[83,27,73,25],[84,8,74,6],[84,9,74,7],[84,10,74,8],[85,8,75,6,"setUser"],[85,15,75,13],[85,16,75,14,"response"],[85,24,75,22],[85,25,75,23,"data"],[85,29,75,27],[85,30,75,28],[86,6,76,4],[86,7,76,5],[86,8,76,6],[86,15,76,13,"error"],[86,20,76,18],[86,22,76,20],[87,8,77,6,"setUser"],[87,15,77,13],[87,16,77,14],[87,20,77,18],[87,21,77,19],[88,6,78,4],[88,7,78,5],[88,16,78,14],[89,8,79,6,"setLoading"],[89,18,79,16],[89,19,79,17],[89,24,79,22],[89,25,79,23],[90,6,80,4],[91,4,81,2],[91,5,81,3],[92,4,83,2],[92,10,83,8,"login"],[92,15,83,13],[92,18,83,16],[92,24,83,16,"login"],[92,25,83,23,"email"],[92,30,83,36],[92,32,83,38,"password"],[92,40,83,54],[92,45,83,59],[93,6,84,4],[93,12,84,10,"response"],[93,20,84,18],[93,23,84,21],[93,29,84,27,"axios"],[93,34,84,32],[93,35,84,32,"default"],[93,42,84,32],[93,43,84,33,"post"],[93,47,84,37],[93,48,85,6],[93,51,85,9,"API_URL"],[93,58,85,16],[93,75,85,33],[93,77,86,6],[94,8,86,8,"email"],[94,13,86,13],[95,8,86,15,"password"],[96,6,86,24],[96,7,86,25],[96,9,87,6],[97,8,87,8,"withCredentials"],[97,23,87,23],[97,25,87,25],[98,6,87,30],[98,7,88,4],[98,8,88,5],[99,6,89,4,"setUser"],[99,13,89,11],[99,14,89,12,"response"],[99,22,89,20],[99,23,89,21,"data"],[99,27,89,25],[99,28,89,26],[100,4,90,2],[100,5,90,3],[101,4,92,2],[101,10,92,8,"register"],[101,18,92,16],[101,21,92,19],[101,27,92,19,"register"],[101,28,92,26,"email"],[101,33,92,39],[101,35,92,41,"password"],[101,43,92,57],[101,45,92,59,"name"],[101,49,92,71],[101,54,92,76],[102,6,93,4],[102,10,93,8],[103,8,94,6,"console"],[103,15,94,13],[103,16,94,14,"log"],[103,19,94,17],[103,20,94,18],[103,62,94,60],[103,64,94,62],[103,67,94,65,"API_URL"],[103,74,94,72],[103,94,94,92],[103,95,94,93],[104,8,95,6],[104,14,95,12,"response"],[104,22,95,20],[104,25,95,23],[104,31,95,29,"axios"],[104,36,95,34],[104,37,95,34,"default"],[104,44,95,34],[104,45,95,35,"post"],[104,49,95,39],[104,50,96,8],[104,53,96,11,"API_URL"],[104,60,96,18],[104,80,96,38],[104,82,97,8],[105,10,97,10,"email"],[105,15,97,15],[106,10,97,17,"password"],[106,18,97,25],[107,10,97,27,"name"],[108,8,97,32],[108,9,97,33],[108,11,98,8],[109,10,98,10,"withCredentials"],[109,25,98,25],[109,27,98,27],[110,8,98,32],[110,9,99,6],[110,10,99,7],[111,8,100,6,"console"],[111,15,100,13],[111,16,100,14,"log"],[111,19,100,17],[111,20,100,18],[111,57,100,55],[111,59,100,57,"response"],[111,67,100,65],[111,68,100,66,"data"],[111,72,100,70],[111,73,100,71],[112,8,101,6,"setUser"],[112,15,101,13],[112,16,101,14,"response"],[112,24,101,22],[112,25,101,23,"data"],[112,29,101,27],[112,30,101,28],[113,6,102,4],[113,7,102,5],[113,8,102,6],[113,15,102,13,"error"],[113,20,102,23],[113,22,102,25],[114,8,103,6,"console"],[114,15,103,13],[114,16,103,14,"error"],[114,21,103,19],[114,22,103,20],[114,56,103,54],[114,58,103,56,"error"],[114,63,103,61],[114,64,103,62],[115,8,104,6,"console"],[115,15,104,13],[115,16,104,14,"error"],[115,21,104,19],[115,22,104,20],[115,51,104,49],[115,53,104,51,"error"],[115,58,104,56],[115,59,104,57,"response"],[115,67,104,65],[115,69,104,67,"data"],[115,73,104,71],[115,74,104,72],[116,8,105,6],[116,14,105,12,"error"],[116,19,105,17],[117,6,106,4],[118,4,107,2],[118,5,107,3],[119,4,109,2],[119,10,109,8,"logout"],[119,16,109,14],[119,19,109,17],[119,25,109,17,"logout"],[119,26,109,17],[119,31,109,29],[120,6,110,4],[120,12,110,10,"axios"],[120,17,110,15],[120,18,110,15,"default"],[120,25,110,15],[120,26,110,16,"post"],[120,30,110,20],[120,31,110,21],[120,34,110,24,"API_URL"],[120,41,110,31],[120,59,110,49],[120,61,110,51],[120,62,110,52],[120,63,110,53],[120,65,110,55],[121,8,110,57,"withCredentials"],[121,23,110,72],[121,25,110,74],[122,6,110,79],[122,7,110,80],[122,8,110,81],[123,6,111,4,"setUser"],[123,13,111,11],[123,14,111,12],[123,18,111,16],[123,19,111,17],[124,4,112,2],[124,5,112,3],[125,4,114,2],[125,10,114,8,"loginWithGoogle"],[125,25,114,23],[125,28,114,26,"loginWithGoogle"],[125,29,114,26],[125,34,114,32],[126,6,115,4],[126,10,115,8,"Platform"],[126,18,115,16],[126,19,115,16,"default"],[126,26,115,16],[126,27,115,17,"OS"],[126,29,115,19],[126,34,115,24],[126,39,115,29],[126,41,115,31],[127,8,116,6],[128,8,117,6,"alert"],[128,13,117,11],[128,14,117,12],[128,92,117,90],[128,93,117,91],[129,6,118,4],[129,7,118,5],[129,13,118,11],[130,8,119,6],[131,8,120,6,"alert"],[131,13,120,11],[131,14,120,12],[131,92,120,90],[131,93,120,91],[132,6,121,4],[133,4,122,2],[133,5,122,3],[134,4,124,2],[134,24,125,4],[134,28,125,4,"_reactJsxDevRuntime"],[134,47,125,4],[134,48,125,4,"jsxDEV"],[134,54,125,4],[134,56,125,5,"AuthContext"],[134,67,125,16],[134,68,125,17,"Provider"],[134,76,125,25],[135,6,125,26,"value"],[135,11,125,31],[135,13,125,33],[136,8,125,35,"user"],[136,12,125,39],[137,8,125,41,"loading"],[137,15,125,48],[138,8,125,50,"login"],[138,13,125,55],[139,8,125,57,"register"],[139,16,125,65],[140,8,125,67,"logout"],[140,14,125,73],[141,8,125,75,"loginWithGoogle"],[142,6,125,91],[142,7,125,93],[143,6,125,93,"children"],[143,14,125,93],[143,16,126,7,"children"],[144,4,126,15],[145,6,126,15,"fileName"],[145,14,126,15],[145,16,126,15,"_jsxFileName"],[145,28,126,15],[146,6,126,15,"lineNumber"],[146,16,126,15],[147,6,126,15,"columnNumber"],[147,18,126,15],[148,4,126,15],[148,11,127,26],[148,12,127,27],[149,2,129,0],[149,3,129,1],[150,2,129,2,"_s"],[150,4,129,2],[150,5,62,13,"AuthProvider"],[150,17,62,66],[151,2,62,66,"_c"],[151,4,62,66],[151,7,62,13,"AuthProvider"],[151,19,62,66],[152,2,131,7],[152,8,131,13,"useAuth"],[152,15,131,20],[152,18,131,23,"useAuth"],[152,19,131,23],[152,24,131,29],[153,4,131,29,"_s2"],[153,7,131,29],[154,4,132,2],[154,10,132,8,"context"],[154,17,132,15],[154,20,132,18],[154,24,132,18,"useContext"],[154,30,132,28],[154,31,132,28,"useContext"],[154,41,132,28],[154,43,132,29,"AuthContext"],[154,54,132,40],[154,55,132,41],[155,4,133,2],[155,8,133,6],[155,9,133,7,"context"],[155,16,133,14],[155,18,133,16],[156,6,134,4],[156,12,134,10],[156,16,134,14,"Error"],[156,21,134,19],[156,22,134,20],[156,64,134,62],[156,65,134,63],[157,4,135,2],[158,4,136,2],[158,11,136,9,"context"],[158,18,136,16],[159,2,137,0],[159,3,137,1],[160,2,137,2,"_s2"],[160,5,137,2],[160,6,131,13,"useAuth"],[160,13,131,20],[161,2,131,20],[161,6,131,20,"_c"],[161,8,131,20],[162,2,131,20,"$RefreshReg$"],[162,14,131,20],[162,15,131,20,"_c"],[162,17,131,20],[163,0,131,20],[163,3]],"functionMap":{"names":["<global>","getBaseURL","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","loginWithGoogle","useAuth"],"mappings":"AAA;mBCyB;CDgC;qEEI;YCI;GDE;oBEE;GFW;gBGE;GHO;mBIE;GJe;iBKE;GLG;0BME;GNQ;CFO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}